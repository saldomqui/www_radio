<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="style.css" />
    <!-- Leaflet CSS (no integrity attr because the digest was invalid) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet JS (no integrity attr) -->
    <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script defer src="script.js"></script>

    <title>Multirobot R2R viewer</title>
</head>

<body>
    <header>
        <!-- <div><strong>Multirobot R2R viewer</strong></div> -->
        <div class="controls">
            <label>Device: <span id="deviceName">Choose serial device</span></label>
            <label>Baud:
                <input id="baud" type="number" value="921600" />
            </label>
            <button id="connect" class="btn">Connect</button>
            <button id="disconnect" class="btn danger" disabled>Disconnect</button>
        </div>

        <!-- Tabs: Map / Terminal (radio + labels for accessible, no-JS tabs) -->
        <div class="tabs" role="tablist" aria-label="View tabs">
            <input type="radio" name="viewtab" id="tab-map-input" checked hidden>
            <label class="tab" for="tab-map-input" role="tab" aria-controls="map-panel">Map</label>

            <input type="radio" name="viewtab" id="tab-term-input" hidden>
            <label class="tab" for="tab-term-input" role="tab" aria-controls="term-panel">Terminal</label>
        </div>
    </header>

    <!-- Panels: map and terminal -->
    <main>
        <div id="panels">
            <section id="map-panel" role="tabpanel" aria-labelledby="tab-map-input">
                <div id="map" role="region" aria-label="Map"></div>
            </section>

            <section id="term-panel" role="tabpanel" aria-labelledby="tab-term-input" class="hidden">
                <div id="terminal" role="region" aria-label="Terminal">
                    <pre id="terminalContent" aria-live="polite" class="terminal-pre"></pre>
                </div>
            </section>
        </div>
    </main>

    <div id="status" role="status" aria-live="polite">status: idle</div>

    <!-- right-side tree -->
    <aside id="tree" aria-label="Robot tree">
        <h3>Robots</h3>
        <div id="treeContent"></div>
    </aside>

</body>

</html>